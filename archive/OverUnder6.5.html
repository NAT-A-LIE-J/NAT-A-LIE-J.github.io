<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Over Under 6.5 - Casino Card Game</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        function OverUnderGame() {
            const [gameStarted, setGameStarted] = useState(false);
            const [numTeams, setNumTeams] = useState(2);
            const [teams, setTeams] = useState([]);
            const [currentTeamIndex, setCurrentTeamIndex] = useState(0);
            const [deck, setDeck] = useState([]);
            const [drawnCards, setDrawnCards] = useState([]);
            const [currentBet, setCurrentBet] = useState(null);
            const [lastResult, setLastResult] = useState(null);
            const [gameOver, setGameOver] = useState(false);
            
            // Settings
            const [autoAddPoints, setAutoAddPoints] = useState(true);
            const [autoSortCards, setAutoSortCards] = useState(false);

            // Create a standard 52-card deck
            const createDeck = () => {
                const suits = ['â™¥', 'â™¦', 'â™£', 'â™ '];
                const ranks = ['A', '2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K'];
                const values = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 10, 10, 10];
                
                const newDeck = [];
                for (let suit of suits) {
                    for (let i = 0; i < ranks.length; i++) {
                        newDeck.push({
                            rank: ranks[i],
                            suit: suit,
                            value: values[i],
                            color: (suit === 'â™¥' || suit === 'â™¦') ? 'red' : 'black'
                        });
                    }
                }
                return shuffleDeck(newDeck);
            };

            // Fisher-Yates shuffle algorithm
            const shuffleDeck = (deck) => {
                const shuffled = [...deck];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            };

            // Start the game
            const startGame = () => {
                const newTeams = Array.from({ length: numTeams }, (_, i) => ({
                    id: i + 1,
                    name: `Team ${i + 1}`,
                    score: 0
                }));
                setTeams(newTeams);
                setDeck(createDeck());
                setDrawnCards([]);
                setCurrentTeamIndex(0);
                setCurrentBet(null);
                setLastResult(null);
                setGameOver(false);
                setGameStarted(true);
            };

            // Place a bet
            const placeBet = (bet) => {
                setCurrentBet(bet);
            };

            // Draw a card and resolve the bet
            const drawCard = () => {
                if (deck.length === 0 || !currentBet) return;

                const [card, ...remainingDeck] = deck;
                const isWin = (currentBet === 'OVER' && card.value > 6.5) || 
                            (currentBet === 'UNDER' && card.value < 6.5);

                // Add card to drawn cards (sorted or unsorted based on setting)
                let newDrawnCards;
                if (autoSortCards) {
                    newDrawnCards = [...drawnCards, card].sort((a, b) => a.value - b.value);
                } else {
                    newDrawnCards = [...drawnCards, card];
                }
                
                setDrawnCards(newDrawnCards);
                setDeck(remainingDeck);
                setLastResult({ card, isWin, bet: currentBet, team: teams[currentTeamIndex] });

                // Auto add points if setting is enabled
                if (autoAddPoints && isWin) {
                    const newTeams = [...teams];
                    newTeams[currentTeamIndex].score += 1;
                    setTeams(newTeams);
                }

                // Check if game is over
                if (remainingDeck.length === 0) {
                    setGameOver(true);
                }
            };

            // Move to next turn (manual button click)
            const nextTurn = () => {
                setCurrentTeamIndex((currentTeamIndex + 1) % numTeams);
                setCurrentBet(null);
                setLastResult(null);
            };

            // Manual point adjustment
            const adjustPoints = (teamIndex, delta) => {
                const newTeams = [...teams];
                newTeams[teamIndex].score = Math.max(0, newTeams[teamIndex].score + delta);
                setTeams(newTeams);
            };

            // Reset game with new shuffle
            const resetGame = () => {
                const resetTeams = teams.map(team => ({ ...team, score: 0 }));
                setTeams(resetTeams);
                setDeck(createDeck());
                setDrawnCards([]);
                setCurrentTeamIndex(0);
                setCurrentBet(null);
                setLastResult(null);
                setGameOver(false);
            };

            // Get winner
            const getWinner = () => {
                if (teams.length === 0) return null;
                return teams.reduce((max, team) => team.score > max.score ? team : max, teams[0]);
            };

            // Trophy SVG component
            const Trophy = ({ className }) => (
                <svg className={className} fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2C11.5 2 11 2.19 10.59 2.59L2.59 10.59C1.8 11.37 1.8 12.63 2.59 13.41L10.59 21.41C11.37 22.2 12.63 22.2 13.41 21.41L21.41 13.41C22.2 12.63 22.2 11.37 21.41 10.59L13.41 2.59C13 2.19 12.5 2 12 2M7 7H17V9H18.5C19.71 9 20.68 10.1 20.5 11.3L20 14.3C19.86 15.28 19.03 16 18.04 16H17V17C17 18.11 16.11 19 15 19H9C7.9 19 7 18.11 7 17V7M9 9V17H15V9H9M11 11H13V15H11V11M5.04 16C4.05 16 3.22 15.28 3.08 14.3L2.58 11.3C2.4 10.1 3.37 9 4.58 9H6V11H4.58L5.04 14H6V16H5.04M18.96 16V14H18.04L18.5 11H17V9H18.42C19.63 9 20.6 10.1 20.42 11.3L19.92 14.3C19.78 15.28 18.95 16 17.96 16H18.96Z"/>
                </svg>
            );

            // Shuffle SVG component
            const Shuffle = ({ className }) => (
                <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
            );

            // Setup screen
            if (!gameStarted) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-gray-900 via-red-950 to-black flex items-center justify-center p-4">
                        <div className="bg-gradient-to-b from-gray-900 to-black border-4 border-red-800 rounded-3xl shadow-2xl p-10 max-w-md w-full relative overflow-hidden">
                            <div className="absolute top-4 right-4 w-12 h-12 rounded-full bg-red-600 border-4 border-white opacity-20"></div>
                            <div className="absolute bottom-4 left-4 w-16 h-16 rounded-full bg-red-700 border-4 border-yellow-400 opacity-20"></div>
                            
                            <h1 className="text-5xl font-bold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-red-400 to-yellow-400 drop-shadow-lg">
                                OVER UNDER 6.5
                            </h1>
                            <p className="text-center text-red-300 mb-8 text-lg font-semibold tracking-wide">HIGH STAKES CARD GAME</p>
                            
                            <div className="mb-6">
                                <label className="block text-sm font-bold text-red-200 mb-3 uppercase tracking-wider">
                                    Number of Players
                                </label>
                                <input
                                    type="number"
                                    min="2"
                                    max="8"
                                    value={numTeams}
                                    onChange={(e) => setNumTeams(Math.max(2, Math.min(8, parseInt(e.target.value) || 2)))}
                                    className="w-full px-4 py-4 bg-gray-800 border-2 border-red-700 rounded-xl focus:outline-none focus:border-red-500 text-lg text-white font-bold text-center shadow-inner"
                                />
                            </div>

                            <div className="mb-6 p-5 bg-black bg-opacity-50 rounded-xl border border-red-900">
                                <p className="font-bold mb-4 text-red-400 text-center uppercase tracking-wide text-sm">Game Settings</p>
                                
                                <div className="space-y-4">
                                    <div className="flex items-center justify-between">
                                        <label className="text-red-100 text-sm font-medium">Auto Add Points</label>
                                        <button
                                            onClick={() => setAutoAddPoints(!autoAddPoints)}
                                            className={`w-14 h-7 rounded-full transition-all border-2 ${
                                                autoAddPoints 
                                                    ? 'bg-red-600 border-red-500' 
                                                    : 'bg-gray-700 border-gray-600'
                                            }`}
                                        >
                                            <div className={`w-5 h-5 rounded-full bg-white transition-all ${
                                                autoAddPoints ? 'ml-7' : 'ml-1'
                                            }`}></div>
                                        </button>
                                    </div>

                                    <div className="flex items-center justify-between">
                                        <label className="text-red-100 text-sm font-medium">Sort Cards by Value</label>
                                        <button
                                            onClick={() => setAutoSortCards(!autoSortCards)}
                                            className={`w-14 h-7 rounded-full transition-all border-2 ${
                                                autoSortCards 
                                                    ? 'bg-red-600 border-red-500' 
                                                    : 'bg-gray-700 border-gray-600'
                                            }`}
                                        >
                                            <div className={`w-5 h-5 rounded-full bg-white transition-all ${
                                                autoSortCards ? 'ml-7' : 'ml-1'
                                            }`}></div>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <button
                                onClick={startGame}
                                className="w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-bold py-5 px-6 rounded-xl transition-all text-xl shadow-lg border-2 border-red-500 transform hover:scale-105"
                            >
                                DEAL ME IN
                            </button>

                            <div className="mt-8 p-5 bg-black bg-opacity-50 rounded-xl text-sm text-red-100 border border-red-900">
                                <p className="font-bold mb-3 text-red-400 text-center uppercase tracking-wide">Game Rules</p>
                                <ul className="space-y-2">
                                    <li className="flex items-start gap-2">
                                        <span className="text-red-500">â™¦</span>
                                        <span>Bet if next card is OVER or UNDER 6.5</span>
                                    </li>
                                    <li className="flex items-start gap-2">
                                        <span className="text-red-500">â™¥</span>
                                        <span>A=1, 2-10=face value, J/Q/K=10</span>
                                    </li>
                                    <li className="flex items-start gap-2">
                                        <span className="text-red-500">â™£</span>
                                        <span>Track drawn cards for counting edge</span>
                                    </li>
                                    <li className="flex items-start gap-2">
                                        <span className="text-red-500">â™ </span>
                                        <span>Most wins after 52 cards takes the pot!</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                );
            }

            // Game over screen
            if (gameOver) {
                const winner = getWinner();
                const sortedTeams = [...teams].sort((a, b) => b.score - a.score);

                return (
                    <div className="min-h-screen bg-gradient-to-br from-gray-900 via-red-950 to-black flex items-center justify-center p-4">
                        <div className="bg-gradient-to-b from-gray-900 to-black border-4 border-yellow-600 rounded-3xl shadow-2xl p-10 max-w-2xl w-full relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-full opacity-10 bg-gradient-to-br from-red-600 to-transparent pointer-events-none"></div>
                            
                            <div className="text-center mb-10 relative z-10">
                                <Trophy className="w-24 h-24 text-yellow-500 mx-auto mb-6 drop-shadow-2xl animate-pulse" />
                                <h1 className="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-yellow-200 to-yellow-400 mb-4 drop-shadow-lg">
                                    WINNER!
                                </h1>
                                <p className="text-3xl text-red-300 font-bold">ðŸŽ° {winner.name} Takes the Pot! ðŸŽ°</p>
                            </div>

                            <div className="space-y-4 mb-10 relative z-10">
                                {sortedTeams.map((team, index) => (
                                    <div
                                        key={team.id}
                                        className={`flex items-center justify-between p-5 rounded-xl transition-all ${
                                            index === 0 
                                                ? 'bg-gradient-to-r from-yellow-900 to-yellow-800 border-3 border-yellow-500 shadow-lg shadow-yellow-900/50' 
                                                : 'bg-gradient-to-r from-gray-800 to-gray-900 border-2 border-red-900'
                                        }`}
                                    >
                                        <div className="flex items-center gap-4">
                                            {index === 0 && <Trophy className="w-8 h-8 text-yellow-400" />}
                                            <span className={`text-2xl font-bold ${
                                                index === 0 ? 'text-yellow-200' : 'text-red-200'
                                            }`}>
                                                {team.name}
                                            </span>
                                        </div>
                                        <span className={`text-3xl font-bold ${
                                            index === 0 ? 'text-yellow-400' : 'text-red-400'
                                        }`}>
                                            {team.score}
                                        </span>
                                    </div>
                                ))}
                            </div>

                            <button
                                onClick={resetGame}
                                className="w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-bold py-5 px-6 rounded-xl transition-all text-xl shadow-lg border-2 border-red-500 flex items-center justify-center gap-3 transform hover:scale-105 relative z-10"
                            >
                                <Shuffle className="w-6 h-6" />
                                SHUFFLE & DEAL NEW GAME
                            </button>
                        </div>
                    </div>
                );
            }

            // Main game screen
            const currentTeam = teams[currentTeamIndex];

            return (
                <div className="min-h-screen bg-gradient-to-br from-gray-900 via-red-950 to-black p-4">
                    <div className="bg-gradient-to-b from-gray-900 to-black border-2 border-red-900 rounded-2xl shadow-2xl p-5 mb-6">
                        <div className="flex items-center justify-between mb-4">
                            <h2 className="text-xl font-bold text-red-300 uppercase tracking-wider">Card Count</h2>
                            <div className="text-sm text-red-200 bg-red-950 px-4 py-2 rounded-lg border border-red-800">
                                <span className="text-red-400">Drawn:</span> <span className="font-bold text-white">{drawnCards.length}</span>
                                <span className="mx-2 text-red-700">|</span>
                                <span className="text-red-400">Remaining:</span> <span className="font-bold text-white">{deck.length}</span>
                            </div>
                        </div>
                        <div className="flex flex-wrap gap-2 min-h-[70px] bg-black bg-opacity-40 rounded-xl p-3">
                            {drawnCards.map((card, index) => (
                                <div
                                    key={index}
                                    className={`w-11 h-16 rounded-lg border-2 flex flex-col items-center justify-center text-sm font-bold shadow-lg transition-transform hover:scale-110 ${
                                        card.color === 'red' 
                                            ? 'text-red-500 border-red-600 bg-white' 
                                            : 'text-gray-900 border-gray-600 bg-white'
                                    }`}
                                >
                                    <div className="text-lg">{card.rank}</div>
                                    <div className="text-xl">{card.suit}</div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                        {teams.map((team, index) => (
                            <div
                                key={team.id}
                                className={`bg-gradient-to-b from-gray-900 to-black border-2 rounded-2xl shadow-2xl p-5 transition-all ${
                                    index === currentTeamIndex 
                                        ? 'ring-4 ring-red-500 scale-105 border-red-600 shadow-red-900/50' 
                                        : 'border-red-900'
                                }`}
                            >
                                <div className="text-center">
                                    <h3 className="text-lg font-bold text-red-300 mb-3 uppercase tracking-wide">{team.name}</h3>
                                    <div className="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-b from-red-400 to-red-600 mb-4">
                                        {team.score}
                                    </div>
                                    <div className="flex gap-2 justify-center">
                                        <button
                                            onClick={() => adjustPoints(index, -1)}
                                            className="bg-gray-800 hover:bg-gray-700 text-red-400 font-bold px-4 py-2 rounded-lg text-sm transition-all border border-red-900 shadow-lg"
                                        >
                                            -1
                                        </button>
                                        <button
                                            onClick={() => adjustPoints(index, 1)}
                                            className="bg-red-700 hover:bg-red-600 text-white font-bold px-4 py-2 rounded-lg text-sm transition-all border border-red-500 shadow-lg"
                                        >
                                            +1
                                        </button>
                                    </div>
                                </div>
                            </div>
                        ))}
                    </div>

                    <div className="max-w-3xl mx-auto">
                        <div className="bg-gradient-to-b from-red-950 to-black border-4 border-red-900 rounded-3xl shadow-2xl p-10 relative overflow-hidden">
                            <div className="absolute inset-0 opacity-5 bg-gradient-to-br from-red-600 to-transparent pointer-events-none"></div>
                            
                            <h2 className="text-4xl font-bold text-center mb-8 text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-red-300 to-yellow-400 uppercase tracking-wider relative z-10">
                                {currentTeam.name}'s Turn
                            </h2>

                            {lastResult && (
                                <div className={`mb-8 p-6 rounded-2xl text-center border-4 relative z-10 ${
                                    lastResult.isWin 
                                        ? 'bg-gradient-to-b from-green-900 to-green-950 border-green-600 shadow-lg shadow-green-900/50' 
                                        : 'bg-gradient-to-b from-red-900 to-red-950 border-red-600 shadow-lg shadow-red-900/50'
                                }`}>
                                    <p className="text-xl font-bold mb-4 text-red-200 uppercase tracking-wide">
                                        {lastResult.team.name} bet {lastResult.bet}
                                    </p>
                                    <div className={`inline-block w-32 h-44 rounded-xl border-4 flex flex-col items-center justify-center mb-4 shadow-2xl bg-white ${
                                        lastResult.card.color === 'red' ? 'border-red-600' : 'border-gray-700'
                                    }`}>
                                        <div className={`text-7xl font-bold ${
                                            lastResult.card.color === 'red' ? 'text-red-600' : 'text-gray-900'
                                        }`}>
                                            {lastResult.card.rank}
                                        </div>
                                        <div className={`text-6xl ${
                                            lastResult.card.color === 'red' ? 'text-red-600' : 'text-gray-900'
                                        }`}>
                                            {lastResult.card.suit}
                                        </div>
                                    </div>
                                    <p className="text-sm text-gray-300 mb-3">Value: {lastResult.card.value}</p>
                                    <p className={`text-3xl font-bold mb-6 ${
                                        lastResult.isWin ? 'text-green-400' : 'text-red-400'
                                    }`}>
                                        {lastResult.isWin ? 'âœ“ WIN!' : 'âœ— LOSE'}
                                    </p>
                                    
                                    {!gameOver && (
                                        <button
                                            onClick={nextTurn}
                                            className="bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-500 hover:to-yellow-600 text-black font-bold py-4 px-10 rounded-xl transition-all text-xl shadow-lg border-2 border-yellow-400 transform hover:scale-105 uppercase tracking-wider"
                                        >
                                            Next Turn â†’
                                        </button>
                                    )}
                                </div>
                            )}

                            {!currentBet && !lastResult && (
                                <div className="mb-8 relative z-10">
                                    <p className="text-center text-red-300 mb-6 text-xl font-bold uppercase tracking-wider">Place Your Bet</p>
                                    <div className="grid grid-cols-2 gap-6">
                                        <button
                                            onClick={() => placeBet('UNDER')}
                                            className="bg-gradient-to-b from-blue-600 to-blue-800 hover:from-blue-500 hover:to-blue-700 text-white font-bold py-8 px-6 rounded-2xl transition-all text-3xl shadow-2xl border-3 border-blue-500 transform hover:scale-105 relative overflow-hidden group"
                                        >
                                            <span className="relative z-10">UNDER</span>
                                            <div className="absolute inset-0 bg-gradient-to-t from-white to-transparent opacity-0 group-hover:opacity-10 transition-opacity"></div>
                                            <div className="text-yellow-300 text-lg mt-1">6.5</div>
                                        </button>
                                        <button
                                            onClick={() => placeBet('OVER')}
                                            className="bg-gradient-to-b from-orange-600 to-red-700 hover:from-orange-500 hover:to-red-600 text-white font-bold py-8 px-6 rounded-2xl transition-all text-3xl shadow-2xl border-3 border-orange-500 transform hover:scale-105 relative overflow-hidden group"
                                        >
                                            <span className="relative z-10">OVER</span>
                                            <div className="absolute inset-0 bg-gradient-to-t from-white to-transparent opacity-0 group-hover:opacity-10 transition-opacity"></div>
                                            <div className="text-yellow-300 text-lg mt-1">6.5</div>
                                        </button>
                                    </div>
                                </div>
                            )}

                            {currentBet && !lastResult && (
                                <div className="text-center relative z-10">
                                    <div className="mb-6 p-6 bg-black bg-opacity-60 rounded-2xl border-2 border-red-800">
                                        <p className="text-2xl font-bold text-red-200 uppercase tracking-wider">
                                            Bet Placed: <span className={`${
                                                currentBet === 'OVER' ? 'text-orange-400' : 'text-blue-400'
                                            }`}>{currentBet} 6.5</span>
                                        </p>
                                    </div>
                                    <button
                                        onClick={drawCard}
                                        className="bg-gradient-to-r from-red-600 to-red-800 hover:from-red-500 hover:to-red-700 text-white font-bold py-8 px-16 rounded-2xl transition-all text-3xl shadow-2xl border-3 border-red-500 transform hover:scale-110 uppercase tracking-wider"
                                    >
                                        Draw Card
                                    </button>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        }

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<OverUnderGame />);
    </script>
</body>
</html>